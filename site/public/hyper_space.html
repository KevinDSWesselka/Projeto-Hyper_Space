<!DOCTYPE html>
<html lang="pt_br">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/base.css">
  <link rel="shortcut icon"
    href="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/15134c4c-39a0-4476-8a3f-2c5d96ce27d6/d9b680y-fdeae898-390c-4bd9-b0f7-c48693dd602e.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzE1MTM0YzRjLTM5YTAtNDQ3Ni04YTNmLTJjNWQ5NmNlMjdkNlwvZDliNjgweS1mZGVhZTg5OC0zOTBjLTRiZDktYjBmNy1jNDg2OTNkZDYwMmUucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.CQxZXahvjoULgcl24xgXrIbQs-KKCo8mrd92vhouwDY" />
  <title>Hyper-Space | Home</title>
</head>

<body>
  <div class="header">
    <div class="magin_nav_bar">

    </div>
    yoda
    <div class="nav_bar">
      <ul>
        <li><a href="./index.html">Home</a></li>
        <li><a id="link_select" href="">Hyper Space</a></li>
        <li><a href="./paths.html">Paths of the Force</a></li>
        <li><a href="./cadastro.html">Sing-in</a></li>
        <li><a href="./login.html">Log-in</a></li>
      </ul>
    </div>
  </div>
  <div id="conteudo">
    <div id="container">
      <h1>HYPER-SPACE</h1>
      <img src="" alt="">
      <p id="descricoes">
        <span id="span_lado"></span>
<!-- 

        <span>
          <div>
            <h1>YODA</h1>
          </div>
          <div>
            <img height: 250px;" src="https://amenteemaravilhosa.com.br/wp-content/uploads/2022/01/yoda-1024x598-1.jpg" alt="">
          </div>
          <div width: 470px;">
            <div class="grafico">
              <h3>Tendencia da Força de CAVALO</h3>
              <span>20% Jedi</span>
              <div width: 20%; height: 30px; margin: 5px; background-color: green; transition: 2.5s;"></div>
              <span>80% Sith</span>
              <div width: 80%; height: 30px; margin: 5px; background-color: red; transition: 2.5s;"></div>
            </div>
            <div width: 250px;" class="grafico">
              <h3>Tendencia da Força de antonio</h3>
              11% Jedi<div width: 11%; height: 30px; margin: 5px; background-color: blue; transition: 2.5s;"></div>
              89% Sith<div width: 89%; height: 30px; margin: 5px; background-color: red; transition: 2.5s;"></div>
            </div>
          </div>
          <div>
            <span>texttexto</span>
          </div>
          <span >
            <div class="like" onclick="btn_linke()">LIKE</div>
          </span>
          <span >0</span>
          
        </span> -->

      </p>
    </div>
  </div>
  <div class="footer">
    <div class="container_footer">
      <a href="https://www.linkedin.com/in/kevin-s-wesselka-systems-developer/">
        <img src="https://cdn4.iconfinder.com/data/icons/social-media-icons-the-circle-set/48/linkedin_circle-512.png"
          alt="">
      </a>
      <a href="https://github.com/KevinDSWesselka">
        <img src="https://cdn.icon-icons.com/icons2/2429/PNG/512/github_logo_icon_147285.png" alt="">
      </a>
      <a href="https://www.instagram.com/">
        <img src="https://cpaq.ufms.br/files/2022/03/Instagram-logo-free-download-PNG-e1647376733700.png" alt="">
      </a>
    </div>
    <p>
      Star Wars - Hyper Space™ 
    </p>
  </div>
</body>

</html>

<script>
  var descricoes = document.getElementById("descricoes")
  var likes = 0;

  // function btn_linke(){
  //   likes++

  //   span_likes.innerHTML = `${likes}`
  //   like_deslike.innerHTML = `<div class="deslike" onclick="btn_deslike()">LIKE</div>`
  // }

  // function btn_deslike(){
  //   likes--

  //   span_likes.innerHTML = `${likes}`
  //   like_deslike.innerHTML = `<div class="like" onclick="btn_linke()">LIKE</div>`
  // }

  function lado_da_forca() {
    if (sessionStorage.JEDI > sessionStorage.SITH) {
      span_lado.innerHTML = `Vejo que você tem <span style="color: blue;"> ${sessionStorage.JEDI}% de vocação ao lado JEDI</span>`
    } else if (sessionStorage.JEDI < sessionStorage.SITH) {
      span_lado.innerHTML = `Vejo que você tem <span style="color: red;"> ${sessionStorage.SITH}% de vocação ao lado SITH</span>`
    } else if (sessionStorage.JEDI == 'null') {
      span_lado.innerHTML = `Você ainda não obteve acesso a força! 
      <a href="./login.html">Click aqui e logue agora</a>`;
    } else if (sessionStorage.length == 0) {
      span_lado.innerHTML = `Você ainda não obteve acesso a força! 
      <a href="./login.html">Click aqui e logue agora</a>`;
    } else {
      span_lado.innerHTML = `Vejo que você tem <span style="color: gold;"> ${sessionStorage.SITH}% SITH e ${sessionStorage.JEDI}% JEDI, você tem o equilibrio da força </span>`
    }
  }

  lado_da_forca()


  
  //   <diisv width: 470px;">
  //     <diav class="grafico">
  //       <h3>Tendencia da Força de CAVALO</h3>
  //       <span>20% Jedi</span>
  //       <div width: 20%; height: 30px; margin: 5px; background-color: green; transition: 2.5s;"></div>
  //       <span>80% Sith</span>
  //       <div width: 80%; height: 30px; margin: 5px; background-color: red; transition: 2.5s;"></div>
  //     </diav>
  //     <diev width: 250px;" class="grafico">
  //       <h3>Tendencia da Força de antonio</h3>
  //       11% Jedi<div width: 11%; height: 30px; margin: 5px; background-color: blue; transition: 2.5s;"></div>
  //       89% Sith<div width: 89%; height: 30px; margin: 5px; background-color: red; transition: 2.5s;"></div>
  //     </diev>
  //   </diisv>
  //   <div>
  //     <span>texttexto</span>
  //   </div>
  //   <span >
  //     <div class="like" onclick="btn_linke()">LIKE</div>
  //   </span>
  //   <span >0</span>
    
  // </span>

  window.onload = () => {
    fetch("/personagens/pegar_personagens", {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      }
    }).then(async function (response) {
      const characters = await response.json();
      for (let i = 0; i < characters.length; i++) {
        const character = characters[i]
        //Span de tudo
        var spanAll = document.createElement("span")

        //Div nome do Personagem
        var divNome = document.createElement("div")
        var h1Nome = document.createElement("h1")

        //Div IMG do Personagem
        var divImg = document.createElement("div")
        var imgImg = document.createElement("img")

        //Div Graficos
        var divGraficos = document.createElement("div")

        //Div Grafico1
        var divGrafico1 = document.createElement("div")
        var h3Tendencia1 = document.createElement("h3")
        var spanJedi1 = document.createElement("span")
        var divGrafJedi1 = document.createElement("div")
        var spanSith1 = document.createElement("span")
        var divGrafSith1 = document.createElement("div")

        //Div Grafico2
        var divGrafico2 = document.createElement("div")
        var h3Tendencia2 = document.createElement("h3")
        var spanJedi2 = document.createElement("span")
        var divGrafJedi2 = document.createElement("div")
        var spanSith2 = document.createElement("span")
        var divGrafSith2 = document.createElement("div")

        //Div descrição do Personagem
        var divDesc = document.createElement("div")
        var spanDesc = document.createElement("span")

        //Span botaão Like do Personagem
        var spanLike = document.createElement("span")
        var divLike = document.createElement("button")
        var spanContLike = document.createElement("span")

        //Nome do Personagem
        h1Nome.textContent = character.nome_personagem
        divNome.appendChild(h1Nome)

        //IMG do Personagem
        imgImg.src = character.url_personagem
        imgImg.style.height = "250px"
        divImg.appendChild(imgImg)

        //Grafico1 do Personagem
        h3Tendencia1.textContent = `Tendencia da força de ${character.nome_personagem}`
        spanJedi1.textContent = `${character.jedi_por_cen}% Jedi`
        divGrafJedi1.style = `width: ${character.jedi_por_cen}%; height: 30px; margin: 5px; background-color: green; transition: 2.5s;`
        spanSith1.textContent = `${character.sith_por_cen}% Sith`
        divGrafSith1.style = `width: ${character.sith_por_cen}%; height: 30px; margin: 5px; background-color: red; transition: 2.5s;`
        divGrafico1.className = "grafico"
        divGrafico1.append(h3Tendencia1, spanJedi1, divGrafJedi1, spanSith1, divGrafSith1)

        //Grafico2 do Personagem
        h3Tendencia2.textContent = `Tendencia da força de ${sessionStorage.NOME_USUARIO}`
        spanJedi2.textContent = `${sessionStorage.JEDI}% Jedi`
        divGrafJedi2.style = `width: ${sessionStorage.JEDI}%; height: 30px; margin: 5px; background-color: blue; transition: 2.5s;`
        spanSith2.textContent = `${sessionStorage.SITH}% Sith`
        divGrafSith2.style = `width: ${sessionStorage.SITH}%; height: 30px; margin: 5px; background-color: red; transition: 2.5s;`
        divGrafico2.className = "grafico"
        divGrafico2.style.width = "250px"
        divGrafico2.append(h3Tendencia2, spanJedi2, divGrafJedi2, spanSith2, divGrafSith2)  

        divGraficos.append(divGrafico1, divGrafico2)

        //Descrição do Personagem
        spanDesc.textContent = character.desc_texto;
        divDesc.appendChild(spanDesc)

        //BTN like do Personagem
        divLike.textContent = "LIKE"
        divLike.className = "like"
        divLike.id = character.id_personagem
        divLike.addEventListener("click", function() {
          likeCharacter(character)
        })
        spanLike.appendChild(divLike)

        var like = getCurtida(character.id_personagem)
        spanContLike.textContent = like

        spanAll.append(divNome, divImg, divGraficos, divDesc, spanLike, spanContLike)
        descricoes.appendChild(spanAll)
      }
    })
  }

  function likeCharacter(character) {
    fetch("/curtidas/post-curtida", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        idUsuario: sessionStorage.ID_USUARIO,
        idPersonagem: character.id_personagem,
      })
    }).then(async function (response) {
      const all = await response
      console.log(all)
    });
  }


  function getCurtida(characterId) {
    fetch(`/curtidas/get-curtida/${sessionStorage.ID_USUARIO}/${characterId}`, {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
      }
    }).then(async function (response) {
      const curtidas = await response.json()
      console.log(curtidas[0].curtidas)
      var likes = curtidas[0].curtidas
      return likes
    });
  }
    



</script>